{
  "outConfig" : {
    "plugin" : "outputCSV"
  },
  "flow" : [
    {
      "name":"wiews_area_filter",
      "sid":[
        {
          "uid":"wiews_region_mapping"
        },
        {
          "uid":"wiews_region_countries"
        }
      ],
      "rid":{
        "uid":"area_selection"
      },
      "result":false,
      "parameters":{
        "filter":{
          "fao":{
            "codes":[
              {
                "uid":"wiews_fao_region_only",
                "codes":[
                  "5000",
                  "5100",
                  "5101",
                  "5102",
                  "5103",
                  "5104",
                  "5105",
                  "5200",
                  "5203",
                  "5204",
                  "5206",
                  "5207",
                  "5300",
                  "5301",
                  "5302",
                  "5303",
                  "5304",
                  "5305",
                  "5400",
                  "5401",
                  "5402",
                  "5403",
                  "5404",
                  "5500",
                  "5501",
                  "5502",
                  "5503",
                  "5504"
                ]
              }
            ]
          }
        }
      }
    },
    {
      "sid":[
        {
          "uid":"indicator20"
        },
        {
          "uid":"area_selection"
        }
      ],
      "name":"filter",
      "parameters":{
        "columns":[
          "domain",
          "rank",
          "wiews_region",
          "indicator",
          "iteration",
          "value",
          "um",
          "element",
          "biologicalAccessionId",
          "stakeholder"
        ],
        "rows":{
          "iteration":{
            "codes":[
              {
                "uid":"wiews_iteration",
                "codes":[
                  "1"
                ]
              }
            ]
          },
          "element":{
            "codes":[
              {
                "uid":"wiews_elements",
                "codes":[
                  "ind",
                  "nfp",
                  "nfpa",
                  "stk"
                ]
              }
            ]
          },
          "wiews_region":{
            "variable":"required_countries"
          }
        }
      }
    },
    {
      "name":"addcolumn",
      "index":-2,
      "parameters":{
        "column":{
          "dataType":"text",
          "id":"indicator_label",
          "title":{
            "EN":"Indicator and rating"
          }
        },
        "value":""
      }
    },
    {
      "name":"select",
      "parameters":{
        "values":{
          "iteration":null,
          "domain":null,
          "element":null,
          "biologicalAccessionId":null,
          "rank":null,
          "wiews_region":null,
          "stakeholder":null,
          "value":null,
          "um":null,
          "indicator":null,
          "indicator_label":"case when element = 'stk' then 'Indicator (' || stakeholder || ' / ' || stakeholder_en || ')' else element_en end"
        }
      }
    },
    {
      "name":"order",
      "parameters":{
        "iteration":"ASC",
        "rank":"ASC",
        "wiews_region":"ASC",
        "indicator":"ASC",
        "indicator_label":"ASC"
      }
    },
    {
      "name": "columns",
      "parameters" : {
        "columns" : [
          "iteration",
          "domain",
          "wiews_region",
          "indicator",
          "indicator_label",
          "value",
          "um"
        ]
      }
    }
  ]
}
